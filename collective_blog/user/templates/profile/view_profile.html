{% extends "base.html" %}
{% load staticfiles %}
{% load i18n %}
{% load vote %}

{% block title %}{% blocktrans trimmed with username=user|capfirst %}{{ username }}'s profile{% endblocktrans %}{% endblock %}

{% block content %}
    <div class="primary container">
        <h1 class="title">
            {{ user|capfirst }}
            <small>{% if self_profile %}{% trans "your profile" %}{% else %}{% trans "user profile" %}{% endif %}</small>
        </h1>

        <span style="font-size: 1.1em">
            {% url "vote_user" username=user.username as karma_url %}
            {% trans "Karma" as name %}
            {% vote name=name prefix="karma" url=karma_url current_score=karma.score current_color=karma_color self_vote=self_vote.vote bad_color_threshold=-10 good_color_threshold=10 %}
        </span>

        {% if user.first_name or user.last_name %}
            <p>{{ user.first_name }} {{ user.last_name }}</p>
        {% endif %}

        {% if show_email and visible_email %}
            <p>{{ visible_email }}</p>
        {% endif %}

        {% if user.profile.location %}
            <p>{% blocktrans trimmed with location=user.profile.location %}From {{ location }}{% endblocktrans %}</p>
        {% endif %}

        {% if user.profile.birthday %}
            <p>{% blocktrans trimmed with birthday=user.profile.birthday %}Birthday at {{ birthday }}{% endblocktrans %}</p>
        {% endif %}

        {% if user.profile.about.html_force %}
            {% if user.first_name or user.last_name or user.profile.location or user.profile.birthday %}
                <hr>
            {% endif %}
            {{ user.profile.about.html_force|safe }}
            {% if editable or self_profile %}
                <hr>
            {% endif %}
        {% endif %}

        {% if editable or self_profile %}
            <p>
                {% if editable %}
                    <a href="{% url 'edit_profile' username=user.username %}">{% trans "Edit profile" %}</a>
                {% endif %}
                {% if editable and self_profile %}
                    &bull;
                {% endif %}
                {% if self_profile %}
                    <a href="{% url 'password_change' %}">{% trans "Change password" %}</a>
                {% endif %}
            </p>
        {% endif %}

        <hr>

        <p>{% trans "No membership" %}</p>
        <!-- TODO list of blogs and posts here -->

        <hr>

    </div>
{% endblock %}

{% block scripts %}
    {{ block.super }}
    <script src="{% static "voting/ajax_voting.js" %}"></script>
{% endblock %}
{% block extra_scripts %}
    {{ block.super }}
    <script>
        {% url "vote_user" username=user.username as karma_url %}
        {% trans "Karma" as name %}
        {% vote_script name=name prefix="karma" url=karma_url current_score=karma.score current_color=karma_color self_vote=self_vote.vote bad_color_threshold=color_threshold.0 good_color_threshold=color_threshold.1 %}
    </script>
{% endblock %}
